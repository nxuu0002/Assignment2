{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "data": {"url": "https://raw.githubusercontent.com/nxuu0002/Assignment2/main/data/worldwide_case.csv"},
  "width":"600",
  "height":"400",
  "mark": "bar",
  "transform": [{
        "fields": ["Confirmed_Case","Population"]
        
    },  
    {"calculate": "datum.population / datum.total_tests ", "as": "percentage"},
    {"filter":"datum.population>0"}
  ],

  "encoding": {
    "x": {"aggregate":"sum","field": "population",
          "axis":{"labelFontSize":12}},
    "y": {"field": "continent",
         "axis":{"labelFontSize":12}},
    "color": {"field": "test_result"},
    "tooltip":[
      {"field":"continent","type":"nominal"},
      {"field":"total_tests","type": "quantitative"},
      {"field":"test_result","type":"nominal"},
      {"field":"population","type":"quantitative"},
      {"field":"percentage","type":"quantitative"}
      
    ]


  }
}
